{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://vscode-to-vs/./src/codeFile.ts","webpack://vscode-to-vs/./src/extension.ts","webpack://vscode-to-vs/external commonjs \"vscode\"","webpack://vscode-to-vs/./src/helpers.ts","webpack://vscode-to-vs/./src/guidGenerator.ts","webpack://vscode-to-vs/external node-commonjs \"fs\"","webpack://vscode-to-vs/external node-commonjs \"path\"","webpack://vscode-to-vs/./src/appendHelpers.ts","webpack://vscode-to-vs/./src/projectGenerator.ts","webpack://vscode-to-vs/webpack/bootstrap","webpack://vscode-to-vs/webpack/startup"],"sourcesContent":["export enum FileType {\n  SOURCE,\n  TEXT,\n  HEADER,\n}\n\nexport interface CodeFile {\n  fileType: FileType;\n  fileName: string;\n}\n","import * as vscode from \"vscode\";\nimport { generateVSProjectFiles } from \"./projectGenerator\";\n\nexport function activate(context: vscode.ExtensionContext) {\n  console.log('Extension \"vscode-to-vs\" is now active!');\n\n  // Register the command\n  const disposable = vscode.commands.registerCommand(\n    \"vscode-to-vs.generateCppSolution\",\n    async () => {\n      try {\n        generateVSProjectFiles();\n      } catch (error) {\n        vscode.window.showErrorMessage(\n          `Error generating project files: ${error}`,\n        );\n      }\n    },\n  );\n\n  context.subscriptions.push(disposable);\n}\n\n// Called when extension is deactivated\nexport function deactivate() {}\n","module.exports = require(\"vscode\");","import path from \"path\";\nimport * as fs from \"fs\";\nimport { generateGUID } from \"./guidGenerator\";\n\nexport function copyTemplateFiles(\n  projectFolder: string,\n  projectDir: string,\n  projectName: string,\n) {\n  // Copy the template files\n  const templateDir = path.join(__dirname, \"assets\");\n  fs.readdirSync(templateDir).forEach((file) => {\n    if (file !== \"template.sln\" && file.startsWith(\"template.\")) {\n      fs.copyFileSync(\n        path.join(templateDir, file),\n        path.join(projectFolder, file),\n      );\n    }\n  });\n\n  // Copy the template.sln file to the projectDir\n  const slnFile = \"template.sln\";\n  fs.copyFileSync(\n    path.join(templateDir, slnFile),\n    path.join(projectDir, slnFile),\n  );\n\n  // Rename the template files\n  fs.readdirSync(projectFolder).forEach((file) => {\n    if (file.startsWith(\"template.\")) {\n      const newFileName = file.replace(\"template\", projectName);\n      fs.renameSync(\n        path.join(projectFolder, file),\n        path.join(projectFolder, newFileName),\n      );\n    }\n  });\n\n  // Rename the template.sln file\n  const oldPath = path.join(projectDir, \"template.sln\");\n  const newPath = path.join(projectDir, `${projectName}.sln`);\n  fs.renameSync(oldPath, newPath);\n}\n\nexport function copyFiles(workingDir: string, projectFolder: string) {\n  const extensions = [\".cpp\", \".h\", \".dat\", \".txt\"];\n\n  fs.readdirSync(workingDir).forEach((file) => {\n    const ext = path.extname(file);\n\n    if (extensions.includes(ext)) {\n      fs.copyFileSync(\n        path.join(workingDir, file),\n        path.join(projectFolder, file),\n      );\n    }\n  });\n\n  // Delete the original files\n  fs.readdirSync(workingDir).forEach((file) => {\n    const ext = path.extname(file);\n\n    if (extensions.includes(ext)) {\n      fs.unlinkSync(path.join(workingDir, file));\n    }\n  });\n\n  // Delete the compiled files\n  fs.readdirSync(workingDir).forEach((file) => {\n    const ext = path.extname(file);\n\n    if (ext === \".exe\" || ext === \".obj\" || ext === \"\") {\n      fs.unlinkSync(path.join(workingDir, file));\n    }\n  });\n}\n\nexport function replaceIdsInSolutionFile(\n  projectName: string,\n  projectDir: string,\n) {\n  const solutionFilePath = path.join(projectDir, `${projectName}.sln`);\n  let content = fs.readFileSync(solutionFilePath, \"utf-8\");\n\n  content = content.replace(/NAME/g, projectName);\n  content = content.replace(/PROJECTID/g, generateGUID());\n  content = content.replace(/SOLUTIONID/g, generateGUID());\n\n  fs.writeFileSync(solutionFilePath, content, \"utf-8\");\n}\n","export function generateGUID() {\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    const r = (Math.random() * 16) | 0;\n    const v = c === \"x\" ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n","module.exports = require(\"fs\");","module.exports = require(\"path\");","import path from \"path\";\nimport * as fs from \"fs\";\nimport { CodeFile, FileType } from \"./codeFile\";\n\nexport function appendFileTypesToFilters(\n  projectFolder: string,\n  projectName: string,\n) {\n  const ignoreFiles = [\n    `${projectName}.vcxproj`,\n    `${projectName}.vcxproj.filters`,\n    `${projectName}.vcxproj.user`,\n  ];\n  const codeFiles: CodeFile[] = fs\n    .readdirSync(projectFolder)\n    .filter((fileName) => !ignoreFiles.includes(fileName))\n    .map((fileName) => ({\n      fileType: getFileType(fileName),\n      fileName: fileName,\n    }));\n\n  let firstPart = \"\";\n  const filters = appendSecondPartFilter(codeFiles, firstPart);\n  const vcxproj = appendSecondPartVcxproj(codeFiles, firstPart);\n\n  fs.appendFileSync(\n    path.join(projectFolder, `${projectName}.vcxproj.filters`),\n    filters,\n  );\n  fs.appendFileSync(\n    path.join(projectFolder, `${projectName}.vcxproj`),\n    vcxproj,\n  );\n}\n\nfunction appendSecondPartFilter(\n  codeFiles: CodeFile[],\n  firstPart: string,\n): string {\n  let itemGroup = \"\\n  <ItemGroup>\";\n  let compile = itemGroup;\n  let text = itemGroup;\n  let header = itemGroup;\n\n  for (let file of codeFiles) {\n    if (file) {\n      switch (file.fileType) {\n        case FileType.SOURCE:\n          compile += `\\n    <ClCompile Include=\"${file.fileName}\">\\n      <Filter>Source Files</Filter>\\n    </ClCompile>`;\n          break;\n        case FileType.TEXT:\n          text += `\\n    <Text Include=\"${file.fileName}\">\\n      <Filter>Source Files</Filter>\\n    </Text>`;\n          break;\n        case FileType.HEADER:\n          header += `\\n    <ClInclude Include=\"${file.fileName}\">\\n      <Filter>Header Files</Filter>\\n    </ClInclude>`;\n          break;\n      }\n    }\n  }\n\n  if (compile !== itemGroup) {\n    compile += \"\\n  </ItemGroup>\";\n    firstPart += compile;\n  }\n  if (text !== itemGroup) {\n    text += \"\\n  </ItemGroup>\";\n    firstPart += text;\n  }\n  if (header !== itemGroup) {\n    header += \"\\n  </ItemGroup>\";\n    firstPart += header;\n  }\n\n  firstPart += \"\\n</Project>\";\n\n  return firstPart;\n}\n\nfunction appendSecondPartVcxproj(\n  codeFiles: CodeFile[],\n  firstPart: string,\n): string {\n  let itemGroup = \"\\n  <ItemGroup>\";\n  let compile = itemGroup;\n  let text = itemGroup;\n  let header = itemGroup;\n\n  for (let file of codeFiles) {\n    if (file) {\n      switch (file.fileType) {\n        case FileType.SOURCE:\n          compile += `\\n    <ClCompile Include=\"${file.fileName}\" />`;\n          break;\n        case FileType.TEXT:\n          text += `\\n    <Text Include=\"${file.fileName}\" />`;\n          break;\n        case FileType.HEADER:\n          header += `\\n    <ClInclude Include=\"${file.fileName}\" />`;\n          break;\n      }\n    }\n  }\n\n  if (compile !== itemGroup) {\n    compile += \"\\n  </ItemGroup>\";\n    firstPart += compile;\n  }\n\n  if (text !== itemGroup) {\n    text += \"\\n  </ItemGroup>\";\n    firstPart += text;\n  }\n\n  if (header !== itemGroup) {\n    header += \"\\n  </ItemGroup>\";\n    firstPart += header;\n  }\n\n  firstPart +=\n    '\\n  <Import Project=\"$(VCTargetsPath)\\\\Microsoft.Cpp.targets\" />\\n  <ImportGroup Label=\"ExtensionTargets\">\\n  </ImportGroup>\\n</Project>';\n\n  return firstPart;\n}\n\nfunction getFileType(fileName: string): FileType {\n  const ext = path.extname(fileName);\n  switch (ext) {\n    case \".cpp\":\n      return FileType.SOURCE;\n    case \".h\":\n      return FileType.HEADER;\n    case \".dat\":\n    case \".txt\":\n    default:\n      return FileType.TEXT;\n  }\n}\n","import * as vscode from \"vscode\";\nimport * as path from \"path\";\nimport * as fs from \"fs\";\nimport {\n  copyFiles,\n  copyTemplateFiles,\n  replaceIdsInSolutionFile,\n} from \"./helpers\";\nimport { appendFileTypesToFilters } from \"./appendHelpers\";\n\nexport async function generateVSProjectFiles() {\n  // Get the current project name from the workspace folder\n  const inWorkspace = vscode.workspace.name;\n\n  if (!inWorkspace) {\n    vscode.window.showErrorMessage(\"No workspace is currently open.\");\n    return;\n  }\n\n  // Get input from user for the project name\n  const newName = await vscode.window.showInputBox({\n    prompt: \"Enter the project name\",\n    value: vscode.workspace.name,\n  });\n\n  // Folder where the project files will be generated\n  const workspaceFolder = vscode.workspace.workspaceFolders?.[0].uri.fsPath;\n  if (!workspaceFolder) {\n    vscode.window.showErrorMessage(\"No workspace folder found.\");\n    return;\n  }\n  const projectDir = path.join(workspaceFolder, newName!);\n  const projectFolder = path.join(projectDir, newName!);\n\n  // Create the folders\n  try {\n    // Create the main directory folder\n    fs.mkdirSync(projectDir, { recursive: true });\n\n    // Create the project folder inside the main directory\n    fs.mkdirSync(projectFolder, { recursive: true });\n  } catch (error) {\n    vscode.window.showErrorMessage(`Error creating folders: `);\n    return;\n  }\n\n  // Copy the template files\n  try {\n    copyTemplateFiles(projectFolder, projectDir, newName!);\n  } catch (error) {\n    if (error instanceof Error) {\n      if (!error.message.includes(\"EPERM\")) {\n        vscode.window.showErrorMessage(`Error copying files: ${error}`);\n        return;\n      } else {\n        return;\n      }\n    }\n  }\n\n  // Replace the IDs in the solution file\n  try {\n    replaceIdsInSolutionFile(newName!, projectDir);\n  } catch (error) {\n    vscode.window.showErrorMessage(`Error replacing IDs: ${error}`);\n    return;\n  }\n\n  // Copy the main files\n  try {\n    copyFiles(workspaceFolder, projectFolder);\n  } catch (error) {\n    if (error instanceof Error) {\n      // Is this the best way to handle this error? Probably not.\n\n      if (!error.message.includes(\"EPERM\")) {\n        vscode.window.showErrorMessage(`Error copying main files: ${error}`);\n        return;\n      } else {\n        return;\n      }\n    }\n  }\n\n  // Append the file types to the filters\n  try {\n    appendFileTypesToFilters(projectFolder, newName!);\n  } catch (error) {\n    vscode.window.showErrorMessage(\n      `Error appending file types to filters: ${error}`,\n    );\n    return;\n  }\n\n  vscode.window.showInformationMessage(\n    \"Visual Studio project files generated successfully\",\n  );\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(265);\n"],"names":["FileType","context","console","log","disposable","vscode","commands","registerCommand","async","generateVSProjectFiles","error","window","showErrorMessage","subscriptions","push","module","exports","require","projectFolder","projectDir","projectName","templateDir","join","__dirname","fs","readdirSync","forEach","file","startsWith","copyFileSync","slnFile","newFileName","replace","renameSync","oldPath","newPath","workingDir","extensions","ext","extname","includes","unlinkSync","solutionFilePath","content","readFileSync","generateGUID","writeFileSync","c","r","Math","random","toString","ignoreFiles","codeFiles","filter","fileName","map","fileType","getFileType","filters","firstPart","itemGroup","compile","text","header","SOURCE","TEXT","HEADER","appendSecondPartFilter","vcxproj","appendSecondPartVcxproj","appendFileSync","workspace","name","newName","showInputBox","prompt","value","workspaceFolder","workspaceFolders","uri","fsPath","path","mkdirSync","recursive","copyTemplateFiles","Error","message","replaceIdsInSolutionFile","copyFiles","appendFileTypesToFilters","showInformationMessage","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call"],"ignoreList":[],"sourceRoot":""}